/*!
 * jQuery bracket_slider v0.9
 * 
 * Copyright (c) 2013 Lukasz Kups
 * http://webrackets.com
 * http://lukaszkups.net
 * @ofcapl
 *
 * Licensed under the MIT license: http://www.opensource.org/licenses/mit-license.php
 */
(function(e,t){if(!e)return t;e.fn.bslide=function(t){var t=e.extend({sliding_speed:500,slide_orientation:"horizontal",next_class:".next",prev_class:".prev",starter_slide:0,controls_size:"small",pagination:true,pagination_position:"center",pagination_width:0,autoplay:true,pause_duration:3e3,slide_container:".slide_container"},t);return this.each(function(){function h(){r=n.width();i=n.height();s=false;o=n.find(t.prev_class).width();u=n.find(t.prev_class).height();a=n.find(t.next_class).width();f=n.find(t.next_class).height();l=(r-t.pagination_width)/2+"px"}function p(){return parseInt(e(this).css("margin-left"))}function d(){return n.find("ul"+t.slide_container)}function v(){return d().find("li.current_slide")}function m(){return d().find("li.slide").not(".current_slide")}function g(){return e(this).next_elem}function y(){return e(this).prev_elem}function b(){if(t.controls_type=="huge"){n.find(t.prev_class).css("width",r/2+"px").css("height",i+"px").css("margin-top","-"+i+"px");n.find(t.next_class).css("width",r/2+"px").css("height",i+"px").css("margin-left",r/2+"px").css("margin-top","-"+i+"px");}else if(t.controls_type=="small"){n.find(t.prev_class).css("margin-top","-"+(i+u)/2+"px");n.find(t.next_class).css({"margin-top":"-"+(i+f)/2+"px","margin-left":r-a+"px"})}else if(t.controls_type=="top-right"){n.find(t.prev_class).css({"margin-top":"-"+u+"px","margin-left":r-a*3+"px"});n.find(t.next_class).css({"margin-top":"-"+f+"px","margin-left":r-a*1.75+"px"})}}function w(){d().css("width",r+"px").css("height",i+"px")}function S(e){return'<li data-slide="'+e.page_id+'" class="'+e.class_list+'" style="width:'+r+"px; height:"+i+'px;">'+e.content+"</li>"}function x(){e("li.current_slide").css("width",r+"px").css("height",i+"px")}function N(){if(t.pagination){n.find("ul.pagination li.active").removeClass("active");n.find("ul.pagination li[data-slide="+T.page_id+"]").addClass("active")}}function C(e){if(!s){s=true;v().css("float","right !important");d().css("width",r*2+"px !important");v().before(S(E[e]));T=E[e];m().css("margin-left",parseInt(v().css("margin-left"))-r+"px").css("float","left");d().animate({marginLeft:parseInt(d().css("margin-left"))+r+"px"},t.sliding_speed);d().promise().done(function(){v().remove();n.find("li.slide").addClass("current_slide").css("margin-left","");d().css("width",r+"px !important").css("margin-left","");s=false})}N()}function k(e){if(!s){s=true;v().css("float","left");d().css("width",r*2+"px");v().after(S(E[e]));T=E[e];m().css("float","right");d().animate({marginLeft:parseInt(d().css("margin-left"))-r+"px"},t.sliding_speed);d().promise().done(function(){v().remove();n.find("li.slide").addClass("current_slide").css("margin-left","");d().css("width",r+"px").css("margin-left","");s=false})}N()}function O(){if(t.autoplay){c=setInterval(function(){k(T.next_elem)},t.pause_duration)}}var n=e(this);var r=n.width();var i=n.height();var s=false;var o=n.find(t.prev_class).width();var u=n.find(t.prev_class).height();var a=n.find(t.next_class).width();var f=n.find(t.next_class).height();var l=(r-t.pagination_width)/2+"px";var c=0;e(window).resize(h);e(document).ready(b);e(window).resize(b);e(document).ready(w);e(window).resize(w);n.find(t.prev_class).addClass("active_button");n.find(t.next_class).addClass("active_button");var E=new Array;n.find("li.slide").each(function(t){var n={content:e(this).html(),next_elem:t+1,prev_elem:t-1,page_id:t,class_list:e(this).attr("class")};E.push(n);e(this).remove()});e(window).resize(x);E[0].prev_elem=E.length-1;E[E.length-1].next_elem=0;var T=E[t.starter_slide];d().append(S(E[t.starter_slide]));n.find("li.slide").addClass("current_slide");n.find(t.prev_class).click(function(e){e.preventDefault();C(T.prev_elem);clearInterval(c);setTimeout(O,t.pause_duration)});e(document).keypress(function(e){if(e.keyCode===37){C(T.prev_elem);clearInterval(c);setTimeout(O,t.pause_duration)}});n.find(t.next_class).click(function(e){e.preventDefault();k(T.next_elem);clearInterval(c);setTimeout(O,t.pause_duration)});e(document).keypress(function(e){if(e.keyCode===39){k(T.next_elem);clearInterval(c);setTimeout(O,t.pause_duration)}});if(t.pagination){var L=n.find("ul.pagination");var A;e.each(E,function(e){if(E[e].page_id==t.starter_slide){L.append('<li data-slide="'+E[e].page_id+'" class="active"></li>')}else{L.append('<li data-slide="'+E[e].page_id+'"></li>')}});if(t.pagination_position=="center"){n.find("ul.pagination").css("margin-left",l)}e(window).resize(function(){if(t.pagination_position=="center"){n.find("ul.pagination").css("margin-left",l)}});e("ul.pagination li").click(function(){if(!e(this).hasClass("active")){e("ul.pagination li.active").removeClass("active")}if(e("ul"+t.slide_container+" li.current_slide").data("slide")<e(this).data("slide")){k(e(this).data("slide"))}else if(e("ul"+t.slide_container+" li.current_slide").data("slide")>e(this).data("slide")){C(e(this).data("slide"))}e(this).addClass("active");clearInterval(c);setTimeout(O,t.pause_duration)})}O()})}})(jQuery,false)